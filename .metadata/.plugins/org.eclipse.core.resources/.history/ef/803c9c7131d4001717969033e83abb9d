package controllers;

import java.util.List;

import com.fasterxml.jackson.databind.JsonNode;

import models.Task;
import play.libs.Json;
import play.mvc.*;

/**
 * This controller contains an action to handle HTTP requests
 * to the application's home page.
 */
public class HomeController extends Controller {

   
    public Result index() {
    	Task task = new Task();
    	task.contents = "First Task";
    	task.save();
        return ok();
    }
    
    public Result getTasks() {
    	List<Task> tasks = Task.find.all();
        return ok(Json.toJson(tasks));
    }
    
    public Result addTask() {
    	JsonNode jsonNode = request().body().asJson();
    	Task task = Json.fromJson(jsonNode, Task.class);
    	System.out.println(task);
    	task.save();
        return ok(Json.toJson(task));
    }

}
